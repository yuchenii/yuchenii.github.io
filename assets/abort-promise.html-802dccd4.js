const n=JSON.parse('{"key":"v-e4afecfe","path":"/snippets/js/abort-promise.html","title":"取消 Promise","lang":"zh-CN","frontmatter":{"date":"2023-12-2","category":["JS"],"tag":["JS","TS","Snippets"],"description":"取消 Promise fetch 和 axios 都支持使用AbortController的方式来取消请求。以 fetch 为例，想要取消请求，分为三步： const url = \\"https://blog.yuchen.tech/\\"; // 1. 创建AbortController const controller = new AbortController(); const signal = controller.signal; // 2. 发送请求时传入AbortController的signal fetch(url, { signal }) .then((response) =&gt; { console.log(response); }) .catch((error) =&gt; { console.log(error); }); // 3. 使用AbortController的abort方法来取消请求 controller.abort(); // Node 下输出 // DOMException [AbortError]: This operation was aborted // 浏览器下输出 // DOMException: The user aborted a request.","head":[["meta",{"property":"og:url","content":"https://blog.yuchen.tech/snippets/js/abort-promise.html"}],["meta",{"property":"og:site_name","content":"雨辰的博客 | 烟雨辰"}],["meta",{"property":"og:title","content":"取消 Promise"}],["meta",{"property":"og:description","content":"取消 Promise fetch 和 axios 都支持使用AbortController的方式来取消请求。以 fetch 为例，想要取消请求，分为三步： const url = \\"https://blog.yuchen.tech/\\"; // 1. 创建AbortController const controller = new AbortController(); const signal = controller.signal; // 2. 发送请求时传入AbortController的signal fetch(url, { signal }) .then((response) =&gt; { console.log(response); }) .catch((error) =&gt; { console.log(error); }); // 3. 使用AbortController的abort方法来取消请求 controller.abort(); // Node 下输出 // DOMException [AbortError]: This operation was aborted // 浏览器下输出 // DOMException: The user aborted a request."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-01-05T13:45:17.000Z"}],["meta",{"property":"article:author","content":"Yuchen"}],["meta",{"property":"article:tag","content":"JS"}],["meta",{"property":"article:tag","content":"TS"}],["meta",{"property":"article:tag","content":"Snippets"}],["meta",{"property":"article:published_time","content":"2023-12-02T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-01-05T13:45:17.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"取消 Promise\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-12-02T00:00:00.000Z\\",\\"dateModified\\":\\"2024-01-05T13:45:17.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Yuchen\\",\\"url\\":\\"https://blog.yuchen.tech\\"}]}"],["link",{"rel":"alternate","type":"application/atom+xml","href":"https://blog.yuchen.tech/atom.xml","title":"雨辰的博客 | 烟雨辰 Atom Feed"}],["link",{"rel":"alternate","type":"application/json","href":"https://blog.yuchen.tech/feed.json","title":"雨辰的博客 | 烟雨辰 JSON Feed"}],["link",{"rel":"alternate","type":"application/rss+xml","href":"https://blog.yuchen.tech/rss.xml","title":"雨辰的博客 | 烟雨辰 RSS Feed"}]]},"headers":[{"level":2,"title":"借助 reject 方法","slug":"借助-reject-方法","link":"#借助-reject-方法","children":[]},{"level":2,"title":"借助 race 方法","slug":"借助-race-方法","link":"#借助-race-方法","children":[]},{"level":2,"title":"借助 AbortController","slug":"借助-abortcontroller","link":"#借助-abortcontroller","children":[]}],"git":{"createdTime":1701598614000,"updatedTime":1704462317000,"contributors":[{"name":"yuchen","email":"dev.chenyu@gmail.com","commits":2}]},"readingTime":{"minutes":2.06,"words":618},"filePathRelative":"snippets/js/abort-promise.md","localizedDate":"2023年12月2日","excerpt":"<h1> 取消 Promise</h1>\\n<p>fetch 和 axios 都支持使用<a href=\\"https://developer.mozilla.org/en-US/docs/Web/API/AbortController\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">AbortController</a>的方式来取消请求。以 fetch 为例，想要取消请求，分为三步：</p>\\n<div class=\\"language-javascript line-numbers-mode\\" data-ext=\\"js\\"><pre class=\\"language-javascript\\"><code><span class=\\"token keyword\\">const</span> url <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"https://blog.yuchen.tech/\\"</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token comment\\">// 1. 创建AbortController</span>\\n<span class=\\"token keyword\\">const</span> controller <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\">AbortController</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">const</span> signal <span class=\\"token operator\\">=</span> controller<span class=\\"token punctuation\\">.</span>signal<span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token comment\\">// 2. 发送请求时传入AbortController的signal</span>\\n<span class=\\"token function\\">fetch</span><span class=\\"token punctuation\\">(</span>url<span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">{</span> signal <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span>\\n  <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">then</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">response</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n    console<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">log</span><span class=\\"token punctuation\\">(</span>response<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span>\\n  <span class=\\"token punctuation\\">.</span><span class=\\"token function\\">catch</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">error</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n    console<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">log</span><span class=\\"token punctuation\\">(</span>error<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token comment\\">// 3. 使用AbortController的abort方法来取消请求</span>\\ncontroller<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">abort</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token comment\\">// Node 下输出</span>\\n<span class=\\"token comment\\">// DOMException [AbortError]: This operation was aborted</span>\\n<span class=\\"token comment\\">// 浏览器下输出</span>\\n<span class=\\"token comment\\">// DOMException: The user aborted a request.</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{n as data};
